@page "/add-boat"
@using MauiAVDApp2.Services
@inject IBoatService boatService
@using MauiAVDApp2.Models
<h3>Add Boat</h3>

<div class="container">
    <div class="row">
        <form @onsubmit="FormSubmit">
            <div class="mb-3">
                <label for="exampleInputName1" class="form-label">Name:</label>
                <input type="text" class="form-control" id="exampleInputName1" placeholder="Bautista" aria-describedby="nameHelp" @bind="boat.BoatName">
            </div>
            <div class="mb-3">
                <label for="form-select" class="form-label">Choose boat type</label>
                <select class="form-select" id="form-select" aria-label="Default select example" @bind="boat.BoatType">
                    @foreach (var boatType in Enum.GetValues(typeof(BoatType)))
                    {
                        <option value="@((int)boatType)" selected="@((int)boatType == (int)boat.BoatType)">@boatType</option>
                    }
                </select>
            </div>


            <div class="mb-3">
                <label for="exampleInpuDescription1" class="form-label">Description:</label>
                <input type="text" class="form-control" id="exampleInputDescription1" placeholder="Bestes boat ever" @bind="boat.BoatDescription">
            </div>
            <div class="mb-3">
                <label for="exampleInputCity1" class="form-label">City:</label>
                <input type="text" class="form-control" placeholder="Amsterdam" id="exampleInputCity1" @bind="boat.BoatCity">
            </div>
            <div class="mb-3">
                <label for="exampleInpuDescription1" class="form-label">Manufacturer:</label>
                <input type="text" class="form-control" placeholder="Yamaha" id="exampleInputDescription1" @bind="boat.BoatManufacturer">
            </div>
            <div class="mb-3">
                <label for="exampleInpuDescription1" class="form-label">Model</label>
                <input type="text" class="form-control" placeholder="GXR" id="exampleInputDescription1" @bind="boat.BoatModel">
            </div>
            <div class="mb-3">
                <label for="exampleInpuDescription1" class="form-label">Image</label>
                <input type="text" class="form-control" placeholder="https//:www.google.com/ray-bautista" id="exampleInputDescription1" @bind="boat.BoatImage">
            </div>
            <div class="mb-3">
                <label for="exampleInpuDescription1" class="form-label">Seats</label>
                <input type="number" class="form-control" placeholder="3" id="exampleInputDescription1" @bind="boat.BoatSeats">
            </div>
            <div class="form-check form-switch">
                <input class="form-check-input"  type="checkbox" role="switch" id="flexSwitchCheckChecked" @bind="boat.BoatWithSkipper">
                <label class="form-check-label" for="flexSwitchCheckChecked">With Skipper</label>
            </div>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked" @bind="boat.BoatWithLicense">
                <label class="form-check-label" for="flexSwitchCheckChecked">Customer needs license</label>
            </div>
            <button type="submit" class="btn btn-primary mt-3 d-block">Submit</button>
        </form>
    </div>
</div>

@code {
    Boat boat = new Boat();

    private async void FormSubmit()
    {
        var response = await boatService.AddBoat(boat);
        if (response > 0)
        {
            boat.BoatPrice = 0;
            boat.BoatPrice = 0.00;
            boat.BoatWithLicense = boat.BoatWithSkipper = false;
            boat.BoatCity = boat.BoatManufacturer = boat.BoatImage = boat.BoatDescription = boat.BoatModel = boat.BoatName = "";
            await App.Current.MainPage.DisplayAlert("form submit invoked", "form submitted", "OK");
        }
        else
        {
            await App.Current.MainPage.DisplayAlert("Boat was not created", "Something went wrong, try again", "OK");
        }
    }
}
